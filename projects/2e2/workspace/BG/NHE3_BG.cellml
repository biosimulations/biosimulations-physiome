<?xml version='1.0'?>
<model name="NHE3_BG" xmlns="http://www.cellml.org/cellml/1.1#" xmlns:cellml="http://www.cellml.org/cellml/1.1#" xmlns:xlink="http://www.w3.org/1999/xlink">
    <import xlink:href="Units.cellml">
        <units name="per_mol" units_ref="per_mol"/>
        <units name="J_per_mol" units_ref="J_per_mol"/>
        <units name="mol_per_s" units_ref="mol_per_s"/>
    </import>
    <import xlink:href="StateDiagram.cellml">
        <component component_ref="state" name="state"/>
    </import>
    <import xlink:href="Parameters.cellml">
        <component component_ref="param" name="param"/>
    </import>
    <component name="module">
        <variable name="time" private_interface="out" units="second"/>
        <!-- State variables-->
        <variable initial_value="1.0" name="q_0_Na_o" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_Na_i" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_H_i" private_interface="out" units="mole"/>
        <variable initial_value="1.0" name="q_0_H_o" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_NH4_i" private_interface="out" units="mole"/>
        <variable initial_value="1.0" name="q_0_NH4_o" private_interface="out" units="mole"/>
        <variable initial_value="1.0" name="q_0_E_o" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_ENa_o" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_ENa_i" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_E_i" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_EH_i" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_EH_o" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_ENH4_i" private_interface="out" units="mole"/>
        <variable initial_value="1.0e-6" name="q_0_ENH4_o" private_interface="out" units="mole"/>
        <variable name="q_Na_o" private_interface="in" units="mole"/>
        <variable name="q_Na_i" private_interface="in" units="mole"/>
        <variable name="q_H_i" private_interface="in" units="mole"/>
        <variable name="q_H_o" private_interface="in" units="mole"/>
        <variable name="q_NH4_i" private_interface="in" units="mole"/>
        <variable name="q_NH4_o" private_interface="in" units="mole"/>
        <variable name="q_E_o" private_interface="in" units="mole"/>
        <variable name="q_ENa_o" private_interface="in" units="mole"/>
        <variable name="q_ENa_i" private_interface="in" units="mole"/>
        <variable name="q_E_i" private_interface="in" units="mole"/>
        <variable name="q_EH_i" private_interface="in" units="mole"/>
        <variable name="q_EH_o" private_interface="in" units="mole"/>
        <variable name="q_ENH4_i" private_interface="in" units="mole"/>
        <variable name="q_ENH4_o" private_interface="in" units="mole"/>
        <variable name="v_Re1" private_interface="in" units="mol_per_s"/>
        <variable name="v_Re2" private_interface="in" units="mol_per_s"/>
        <variable name="v_Re3" private_interface="in" units="mol_per_s"/>
        <variable name="v_Re4" private_interface="in" units="mol_per_s"/>
        <variable name="v_Re5" private_interface="in" units="mol_per_s"/>
        <variable name="v_Re6" private_interface="in" units="mol_per_s"/>
        <variable name="v_Re7" private_interface="in" units="mol_per_s"/>
        <variable name="v_Re8" private_interface="in" units="mol_per_s"/>
        <variable name="v_Re9" private_interface="in" units="mol_per_s"/>
        <variable name="u_Na_o" private_interface="in" units="J_per_mol"/>
        <variable name="u_Na_i" private_interface="in" units="J_per_mol"/>
        <variable name="u_H_i" private_interface="in" units="J_per_mol"/>
        <variable name="u_H_o" private_interface="in" units="J_per_mol"/>
        <variable name="u_NH4_i" private_interface="in" units="J_per_mol"/>
        <variable name="u_NH4_o" private_interface="in" units="J_per_mol"/>
        <variable name="u_E_o" private_interface="in" units="J_per_mol"/>
        <variable name="u_ENa_o" private_interface="in" units="J_per_mol"/>
        <variable name="u_ENa_i" private_interface="in" units="J_per_mol"/>
        <variable name="u_E_i" private_interface="in" units="J_per_mol"/>
        <variable name="u_EH_i" private_interface="in" units="J_per_mol"/>
        <variable name="u_EH_o" private_interface="in" units="J_per_mol"/>
        <variable name="u_ENH4_i" private_interface="in" units="J_per_mol"/>
        <variable name="u_ENH4_o" private_interface="in" units="J_per_mol"/>
        <variable name="u15" private_interface="in" units="J_per_mol"/>
        <variable name="u16" private_interface="in" units="J_per_mol"/>
        <variable name="u17" private_interface="in" units="J_per_mol"/>
        <variable name="u18" private_interface="in" units="J_per_mol"/>
        <variable name="u19" private_interface="in" units="J_per_mol"/>
        <variable name="u20" private_interface="in" units="J_per_mol"/>
    </component>
    <!-- Mapping to the BG state diagram-->
    <connection>
        <map_components component_1="module" component_2="state"/>
        <map_variables variable_1="time" variable_2="t"/>
        <map_variables variable_1="q_0_Na_o" variable_2="q1_init"/>
        <map_variables variable_1="q_0_Na_i" variable_2="q2_init"/>
        <map_variables variable_1="q_0_H_i" variable_2="q3_init"/>
        <map_variables variable_1="q_0_H_o" variable_2="q4_init"/>
        <map_variables variable_1="q_0_NH4_i" variable_2="q5_init"/>
        <map_variables variable_1="q_0_NH4_o" variable_2="q6_init"/>
        <map_variables variable_1="q_0_E_o" variable_2="q7_init"/>
        <map_variables variable_1="q_0_ENa_o" variable_2="q8_init"/>
        <map_variables variable_1="q_0_ENa_i" variable_2="q9_init"/>
        <map_variables variable_1="q_0_E_i" variable_2="q10_init"/>
        <map_variables variable_1="q_0_EH_i" variable_2="q11_init"/>
        <map_variables variable_1="q_0_EH_o" variable_2="q12_init"/>
        <map_variables variable_1="q_0_ENH4_i" variable_2="q13_init"/>
        <map_variables variable_1="q_0_ENH4_o" variable_2="q14_init"/>
        <map_variables variable_1="q_Na_o" variable_2="q1"/>
        <map_variables variable_1="q_Na_i" variable_2="q2"/>
        <map_variables variable_1="q_H_i" variable_2="q3"/>
        <map_variables variable_1="q_H_o" variable_2="q4"/>
        <map_variables variable_1="q_NH4_i" variable_2="q5"/>
        <map_variables variable_1="q_NH4_o" variable_2="q6"/>
        <map_variables variable_1="q_E_o" variable_2="q7"/>
        <map_variables variable_1="q_ENa_o" variable_2="q8"/>
        <map_variables variable_1="q_ENa_i" variable_2="q9"/>
        <map_variables variable_1="q_E_i" variable_2="q10"/>
        <map_variables variable_1="q_EH_i" variable_2="q11"/>
        <map_variables variable_1="q_EH_o" variable_2="q12"/>
        <map_variables variable_1="q_ENH4_i" variable_2="q13"/>
        <map_variables variable_1="q_ENH4_o" variable_2="q14"/>
        <map_variables variable_1="v_Re1" variable_2="v_Re1"/>
        <map_variables variable_1="v_Re2" variable_2="v_Re2"/>
        <map_variables variable_1="v_Re3" variable_2="v_Re3"/>
        <map_variables variable_1="v_Re4" variable_2="v_Re4"/>
        <map_variables variable_1="v_Re5" variable_2="v_Re5"/>
        <map_variables variable_1="v_Re6" variable_2="v_Re6"/>
        <map_variables variable_1="v_Re7" variable_2="v_Re7"/>
        <map_variables variable_1="v_Re8" variable_2="v_Re8"/>
        <map_variables variable_1="v_Re9" variable_2="v_Re9"/>
        <map_variables variable_1="u_Na_o" variable_2="u1"/>
        <map_variables variable_1="u_Na_i" variable_2="u2"/>
        <map_variables variable_1="u_H_i" variable_2="u3"/>
        <map_variables variable_1="u_H_o" variable_2="u4"/>
        <map_variables variable_1="u_NH4_i" variable_2="u5"/>
        <map_variables variable_1="u_NH4_o" variable_2="u6"/>
        <map_variables variable_1="u_E_o" variable_2="u7"/>
        <map_variables variable_1="u_ENa_o" variable_2="u8"/>
        <map_variables variable_1="u_ENa_i" variable_2="u9"/>
        <map_variables variable_1="u_E_i" variable_2="u10"/>
        <map_variables variable_1="u_EH_i" variable_2="u11"/>
        <map_variables variable_1="u_EH_o" variable_2="u12"/>
        <map_variables variable_1="u_ENH4_i" variable_2="u13"/>
        <map_variables variable_1="u_ENH4_o" variable_2="u14"/>
        <map_variables variable_1="u15" variable_2="u15"/>
        <map_variables variable_1="u16" variable_2="u16"/>
        <map_variables variable_1="u17" variable_2="u17"/>
        <map_variables variable_1="u18" variable_2="u18"/>
        <map_variables variable_1="u19" variable_2="u19"/>
        <map_variables variable_1="u20" variable_2="u20"/>
    </connection>
    <!-- Mapping to the Parameters module-->
    <connection>
        <map_components component_1="param" component_2="state"/>
        <map_variables variable_1="RT" variable_2="RT"/>
        <map_variables variable_1="K_Na_o" variable_2="K_q1"/>
        <map_variables variable_1="K_Na_i" variable_2="K_q2"/>
        <map_variables variable_1="K_H_i" variable_2="K_q3"/>
        <map_variables variable_1="K_H_o" variable_2="K_q4"/>
        <map_variables variable_1="K_NH4_i" variable_2="K_q5"/>
        <map_variables variable_1="K_NH4_o" variable_2="K_q6"/>
        <map_variables variable_1="K_E_o" variable_2="K_q7"/>
        <map_variables variable_1="K_ENa_o" variable_2="K_q8"/>
        <map_variables variable_1="K_ENa_i" variable_2="K_q9"/>
        <map_variables variable_1="K_E_i" variable_2="K_q10"/>
        <map_variables variable_1="K_EH_i" variable_2="K_q11"/>
        <map_variables variable_1="K_EH_o" variable_2="K_q12"/>
        <map_variables variable_1="K_ENH4_i" variable_2="K_q13"/>
        <map_variables variable_1="K_ENH4_o" variable_2="K_q14"/>
        <map_variables variable_1="K_Re1" variable_2="K_Re1"/>
        <map_variables variable_1="K_Re2" variable_2="K_Re2"/>
        <map_variables variable_1="K_Re3" variable_2="K_Re3"/>
        <map_variables variable_1="K_Re4" variable_2="K_Re4"/>
        <map_variables variable_1="K_Re5" variable_2="K_Re5"/>
        <map_variables variable_1="K_Re6" variable_2="K_Re6"/>
        <map_variables variable_1="K_Re7" variable_2="K_Re7"/>
        <map_variables variable_1="K_Re8" variable_2="K_Re8"/>
        <map_variables variable_1="K_Re9" variable_2="K_Re9"/>
    </connection>
    <group>
        <relationship_ref relationship="encapsulation"/>
        <component_ref component="module">
            <component_ref component="state"/>
            <component_ref component="param"/>
        </component_ref>
    </group>
</model>
